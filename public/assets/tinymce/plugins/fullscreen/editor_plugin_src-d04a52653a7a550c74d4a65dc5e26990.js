/**
 * editor_plugin_src.js
 *
 * Copyright 2009, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://tinymce.moxiecode.com/license
 * Contributing: http://tinymce.moxiecode.com/contributing
 */
(function(){var a=tinymce.DOM;tinymce.create("tinymce.plugins.FullScreenPlugin",{init:function(b,c){var d=this,e={},f,g;d.editor=b,b.addCommand("mceFullScreen",function(){var h,i=a.doc.documentElement;if(b.getParam("fullscreen_is_enabled")){b.getParam("fullscreen_new_window")?closeFullscreen():a.win.setTimeout(function(){tinymce.dom.Event.remove(a.win,"resize",d.resizeFunc),tinyMCE.get(b.getParam("fullscreen_editor_id")).setContent(b.getContent()),tinyMCE.remove(b),a.remove("mce_fullscreen_container"),i.style.overflow=b.getParam("fullscreen_html_overflow"),a.setStyle(a.doc.body,"overflow",b.getParam("fullscreen_overflow")),a.win.scrollTo(b.getParam("fullscreen_scrollx"),b.getParam("fullscreen_scrolly")),tinyMCE.settings=tinyMCE.oldSettings},10);return}if(b.getParam("fullscreen_new_window")){h=a.win.open(c+"/fullscreen.htm","mceFullScreenPopup","fullscreen=yes,menubar=no,toolbar=no,scrollbars=no,resizable=yes,left=0,top=0,width="+screen.availWidth+",height="+screen.availHeight);try{h.resizeTo(screen.availWidth,screen.availHeight)}catch(j){}}else tinyMCE.oldSettings=tinyMCE.settings,e.fullscreen_overflow=a.getStyle(a.doc.body,"overflow",1)||"auto",e.fullscreen_html_overflow=a.getStyle(i,"overflow",1),f=a.getViewPort(),e.fullscreen_scrollx=f.x,e.fullscreen_scrolly=f.y,tinymce.isOpera&&e.fullscreen_overflow=="visible"&&(e.fullscreen_overflow="auto"),tinymce.isIE&&e.fullscreen_overflow=="scroll"&&(e.fullscreen_overflow="auto"),tinymce.isIE&&(e.fullscreen_html_overflow=="visible"||e.fullscreen_html_overflow=="scroll")&&(e.fullscreen_html_overflow="auto"),e.fullscreen_overflow=="0px"&&(e.fullscreen_overflow=""),a.setStyle(a.doc.body,"overflow","hidden"),i.style.overflow="hidden",f=a.getViewPort(),a.win.scrollTo(0,0),tinymce.isIE&&(f.h-=1),tinymce.isIE6?g="absolute;top:"+f.y:g="fixed;top:0",n=a.add(a.doc.body,"div",{id:"mce_fullscreen_container",style:"position:"+g+";left:0;width:"+f.w+"px;height:"+f.h+"px;z-index:200000;"}),a.add(n,"div",{id:"mce_fullscreen"}),tinymce.each(b.settings,function(a,b){e[b]=a}),e.id="mce_fullscreen",e.width=n.clientWidth,e.height=n.clientHeight-15,e.fullscreen_is_enabled=!0,e.fullscreen_editor_id=b.id,e.theme_advanced_resizing=!1,e.save_onsavecallback=function(){b.setContent(tinyMCE.get(e.id).getContent()),b.execCommand("mceSave")},tinymce.each(b.getParam("fullscreen_settings"),function(a,b){e[b]=a}),e.theme_advanced_toolbar_location==="external"&&(e.theme_advanced_toolbar_location="top"),d.fullscreenEditor=new tinymce.Editor("mce_fullscreen",e),d.fullscreenEditor.onInit.add(function(){d.fullscreenEditor.setContent(b.getContent()),d.fullscreenEditor.focus()}),d.fullscreenEditor.render(),d.fullscreenElement=new tinymce.dom.Element("mce_fullscreen_container"),d.fullscreenElement.update(),d.resizeFunc=tinymce.dom.Event.add(a.win,"resize",function(){var a=tinymce.DOM.getViewPort(),b=d.fullscreenEditor,c,e;c=b.dom.getSize(b.getContainer().firstChild),e=b.dom.getSize(b.getContainer().getElementsByTagName("iframe")[0]),b.theme.resizeTo(a.w-c.w+e.w,a.h-c.h+e.h)})}),b.addButton("fullscreen",{title:"fullscreen.desc",cmd:"mceFullScreen"}),b.onNodeChange.add(function(a,b){b.setActive("fullscreen",a.getParam("fullscreen_is_enabled"))})},getInfo:function(){return{longname:"Fullscreen",author:"Moxiecode Systems AB",authorurl:"http://tinymce.moxiecode.com",infourl:"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/fullscreen",version:tinymce.majorVersion+"."+tinymce.minorVersion}}}),tinymce.PluginManager.add("fullscreen",tinymce.plugins.FullScreenPlugin)})();