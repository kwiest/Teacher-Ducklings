/**
 * fullpage.js
 *
 * Copyright 2009, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://tinymce.moxiecode.com/license
 * Contributing: http://tinymce.moxiecode.com/contributing
 */
(function(){function e(a,b){var c=document.getElementById(a);c&&(b=b||"",c.nodeName=="SELECT"?selectByValue(document.forms[0],a,b):c.type=="checkbox"?c.checked=!!b:c.value=b)}function f(a){var b=document.getElementById(a);return b.nodeName=="SELECT"?b.options[b.selectedIndex].value:b.type=="checkbox"?b.checked:b.value}function g(){var f=document.forms[0],g,h,i,j=tinyMCEPopup.editor;i=j.getParam("fullpage_doctypes",a).split(",");for(g=0;g<i.length;g++)h=i[g].split("="),h.length>1&&addSelectValue(f,"doctype",h[0],h[1]);i=j.getParam("fullpage_fonts",c).split(";");for(g=0;g<i.length;g++)h=i[g].split("="),h.length>1&&addSelectValue(f,"fontface",h[0],h[1]);i=j.getParam("fullpage_fontsizes",d).split(",");for(g=0;g<i.length;g++)addSelectValue(f,"fontsize",i[g],i[g]);i=j.getParam("fullpage_encodings",b).split(",");for(g=0;g<i.length;g++)h=i[g].split("="),h.length>1&&addSelectValue(f,"docencoding",h[0],h[1]);document.getElementById("bgcolor_pickcontainer").innerHTML=getColorPickerHTML("bgcolor_pick","bgcolor"),document.getElementById("link_color_pickcontainer").innerHTML=getColorPickerHTML("link_color_pick","link_color"),document.getElementById("visited_color_pickcontainer").innerHTML=getColorPickerHTML("visited_color_pick","visited_color"),document.getElementById("active_color_pickcontainer").innerHTML=getColorPickerHTML("active_color_pick","active_color"),document.getElementById("textcolor_pickcontainer").innerHTML=getColorPickerHTML("textcolor_pick","textcolor"),document.getElementById("stylesheet_browsercontainer").innerHTML=getBrowserHTML("stylesheetbrowser","stylesheet","file","fullpage"),document.getElementById("bgimage_pickcontainer").innerHTML=getBrowserHTML("bgimage_browser","bgimage","image","fullpage"),isVisible("stylesheetbrowser")&&(document.getElementById("stylesheet").style.width="220px"),isVisible("link_href_browser")&&(document.getElementById("element_link_href").style.width="230px"),isVisible("bgimage_browser")&&(document.getElementById("bgimage").style.width="210px"),tinymce.each(tinyMCEPopup.getWindowArg("data"),function(a,b){e(b,a)}),FullPageDialog.changedStyle(),updateColor("textcolor_pick","textcolor"),updateColor("bgcolor_pick","bgcolor"),updateColor("visited_color_pick","visited_color"),updateColor("active_color_pick","active_color"),updateColor("link_color_pick","link_color")}tinyMCEPopup.requireLangPack();var a='XHTML 1.0 Transitional=<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">,XHTML 1.0 Frameset=<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Frameset//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-frameset.dtd">,XHTML 1.0 Strict=<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">,XHTML 1.1=<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">,HTML 4.01 Transitional=<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">,HTML 4.01 Strict=<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">,HTML 4.01 Frameset=<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Frameset//EN" "http://www.w3.org/TR/html4/frameset.dtd">',b="Western european (iso-8859-1)=iso-8859-1,Central European (iso-8859-2)=iso-8859-2,Unicode (UTF-8)=utf-8,Chinese traditional (Big5)=big5,Cyrillic (iso-8859-5)=iso-8859-5,Japanese (iso-2022-jp)=iso-2022-jp,Greek (iso-8859-7)=iso-8859-7,Korean (iso-2022-kr)=iso-2022-kr,ASCII (us-ascii)=us-ascii",c="Arial=arial,helvetica,sans-serif;Courier New=courier new,courier,monospace;Georgia=georgia,times new roman,times,serif;Tahoma=tahoma,arial,helvetica,sans-serif;Times New Roman=times new roman,times,serif;Verdana=verdana,arial,helvetica,sans-serif;Impact=impact;WingDings=wingdings",d="10px,11px,12px,13px,14px,15px,16px";window.FullPageDialog={changedStyle:function(){var a,b=tinyMCEPopup.editor.dom.parseStyle(f("style"));e("fontface",b["font-face"]),e("fontsize",b["font-size"]),e("textcolor",b.color),(a=b["background-image"])?e("bgimage",a.replace(new RegExp("url\\('?([^']*)'?\\)","gi"),"$1")):e("bgimage",""),e("bgcolor",b["background-color"]),e("topmargin",""),e("rightmargin",""),e("bottommargin",""),e("leftmargin","");if(a=b.margin)a=a.split(" "),b["margin-top"]=a[0]||"",b["margin-right"]=a[1]||a[0]||"",b["margin-bottom"]=a[2]||a[0]||"",b["margin-left"]=a[3]||a[0]||"";(a=b["margin-top"])&&e("topmargin",a.replace(/px/,"")),(a=b["margin-right"])&&e("rightmargin",a.replace(/px/,"")),(a=b["margin-bottom"])&&e("bottommargin",a.replace(/px/,"")),(a=b["margin-left"])&&e("leftmargin",a.replace(/px/,"")),updateColor("bgcolor_pick","bgcolor"),updateColor("textcolor_pick","textcolor")},changedStyleProp:function(){var a,b=tinyMCEPopup.editor.dom,c=b.parseStyle(f("style"));c["font-face"]=f("fontface"),c["font-size"]=f("fontsize"),c.color=f("textcolor"),c["background-color"]=f("bgcolor"),(a=f("bgimage"))?c["background-image"]="url('"+a+"')":c["background-image"]="",delete c.margin,(a=f("topmargin"))?c["margin-top"]=a+"px":c["margin-top"]="",(a=f("rightmargin"))?c["margin-right"]=a+"px":c["margin-right"]="",(a=f("bottommargin"))?c["margin-bottom"]=a+"px":c["margin-bottom"]="",(a=f("leftmargin"))?c["margin-left"]=a+"px":c["margin-left"]="",e("style",b.serializeStyle(b.parseStyle(b.serializeStyle(c)))),this.changedStyle()},update:function(){var a={};tinymce.each(tinyMCEPopup.dom.select("select,input,textarea"),function(b){a[b.id]=f(b.id)}),tinyMCEPopup.editor.plugins.fullpage._dataToHtml(a),tinyMCEPopup.close()}},tinyMCEPopup.onInit.add(g)})();